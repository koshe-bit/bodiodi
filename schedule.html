<section class="sched-wrap">
  <header class="sched-head">
    <h1 class="sched-title">Schedule</h1>
    <p class="sched-sub">Rolling 7-day view. Reserve your spot in seconds.</p>
  </header>

  <div id="bodiSchedule" class="sched-list" aria-live="polite"></div>

  <div class="sched-foot">
    <a class="sched-reserveAll" href="https://bodiodi.com/signup.html">Reserve a class</a>
  </div>
</section>
<style>/* ===== Bodiodi Schedule (rolling 7) ===== */
.sched-wrap{
  max-width: 980px;
  margin: 0 auto;
  padding: 18px 16px 36px;
}

.sched-head{
  margin: 10px 0 18px;
}

.sched-title{
  margin: 0 0 8px;
  font-size: clamp(26px, 3vw, 34px);
  letter-spacing: .2px;
  color: var(--ink);
}

.sched-sub{
  margin: 0;
  color: color-mix(in oklab, var(--ink) 70%, white);
  font-size: 15px;
  line-height: 1.5;
  max-width: 58ch;
}

.sched-list{
  display: grid;
  gap: 12px;
}

.sched-day{
  border: 1px solid color-mix(in oklab, var(--dk) 18%, white);
  border-radius: 18px;
  padding: 14px 14px 12px;
  background: rgba(255,255,255,.66);
  backdrop-filter: blur(6px);
}

.sched-dayHead{
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 12px;
  padding: 2px 2px 10px;
  border-bottom: 1px solid color-mix(in oklab, var(--dk) 12%, white);
  margin-bottom: 10px;
}

.sched-dayLabel{
  margin: 0;
  font-weight: 700;
  color: var(--ink);
  font-size: 16px;
  letter-spacing: .2px;
}

.sched-dateLabel{
  margin: 0;
  color: color-mix(in oklab, var(--ink) 68%, white);
  font-size: 14px;
}

.sched-items{
  display: grid;
  gap: 10px;
}

.sched-item{
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 10px;
  padding: 10px 10px;
  border-radius: 14px;
  background: rgba(255,255,255,.6);
  border: 1px solid color-mix(in oklab, var(--dk) 10%, white);
}

.sched-itemText{
  min-width: 0;
}

.sched-classLink{
  color: var(--ink);
  text-decoration: none;
  font-weight: 750;
  letter-spacing: .1px;
}

.sched-classLink:hover{
  text-decoration: underline;
  text-underline-offset: 3px;
}

.sched-meta{
  margin-top: 3px;
  font-size: 14px;
  color: color-mix(in oklab, var(--ink) 70%, white);
  line-height: 1.35;
}

.sched-empty{
  padding: 10px 6px 2px;
  color: color-mix(in oklab, var(--ink) 68%, white);
  font-size: 14px;
}

.sched-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid color-mix(in oklab, var(--dk) 18%, white);
  background: var(--accent);
  color: color-mix(in oklab, var(--ink) 88%, black);
  font-weight: 800;
  letter-spacing: .2px;
  text-decoration: none;
  white-space: nowrap;
}

.sched-btn:active{
  transform: translateY(1px);
}

.sched-foot{
  margin-top: 16px;
  display: flex;
  justify-content: flex-start;
}

.sched-reserveAll{
  display: inline-flex;
  padding: 12px 16px;
  border-radius: 14px;
  text-decoration: none;
  color: white;
  background: color-mix(in oklab, var(--dk) 92%, black);
  font-weight: 750;
}

/* Mobile: stack item content nicely */
@media (max-width: 540px){
  .sched-item{
    grid-template-columns: 1fr;
    gap: 10px;
    padding: 12px;
  }
  .sched-btn{
    width: 100%;
  }
}
</style>
<body><script>
/**
 * Bodiodi rolling 7-day schedule (template-driven)
 * - Renders today + next 6 days
 * - Uses a weekly template: same classes each week, dates roll
 * - Class names link to classes.html (no anchors)
 * - Reserve button links to signup.html
 */

(function () {
  const RESERVE_URL = "https://bodiodi.com/signup.html";
  const CLASSES_URL = "https://bodiodi.com/classes.html";

  // Instructor labels
  const INSTRUCTORS = {
    nicole: "Nicole",
    sarah: "Sarah",
  };

  // Weekly template.
  // day: 0=Sun ... 6=Sat
  // time: 24h "HH:MM"
  // durationMin: used only for display (end time).
  const TEMPLATE = [
    { day: 1, className: "Anabolix", time: "17:30", durationMin: 30, instructor: "nicole" }, // Monday 5:30p–6:00p
    { day: 3, className: "Rhythmix", time: "18:15", durationMin: 60, instructor: "nicole" }, // Wednesday 6:15p–7:15p
    { day: 4, className: "Anabolix", time: "18:15", durationMin: 30, instructor: "nicole" }, // Thursday 6:15p–6:45p
    { day: 6, className: "Rhythmix", time: "08:30", durationMin: 60, instructor: "nicole" }, // Saturday 8:30a–9:30a
    { day: 6, className: "Anabolix", time: "09:45", durationMin: 30, instructor: "nicole" }, // Saturday 9:45a–10:15a
    { day: 0, className: "Kinetix", time: "15:00", durationMin: 60, instructor: "sarah" },   // Sunday 3:00p–4:00p
  ];

  const showEndTimes = true; // set false if you want only "5:30p" not ranges.

  const root = document.getElementById("bodiSchedule");
  if (!root) return;

  const now = new Date();
  const days = buildRollingDays_(now, 7);

  root.innerHTML = days
    .map((d) => renderDay_(d, classesForDate_(d.date)))
    .join("");

  function classesForDate_(dateObj) {
    const dow = dateObj.getDay();
    return TEMPLATE
      .filter((x) => x.day === dow)
      .map((x) => {
        const start = combineDateTime_(dateObj, x.time);
        const end = addMinutes_(start, x.durationMin);
        return { ...x, start, end };
      })
      .sort((a, b) => a.start - b.start);
  }

  function renderDay_(day, items) {
    const dayLabel = `<b>${escapeHtml_(day.weekday)}</b>`;
    const dateLabel = `${day.month}/${day.day}`;

    if (!items || items.length === 0) {
      return `
        <article class="sched-day">
          <div class="sched-dayHead">
            <p class="sched-dayLabel">${dayLabel}</p>
            <p class="sched-dateLabel">${dateLabel}</p>
          </div>
          <div class="sched-empty">No classes at this time, check back later</div>
        </article>
      `;
    }

    const rows = items
      .map((it) => {
        const timeStr = formatTime_(it.start);
        const endStr = formatTime_(it.end);
        const timeRange = showEndTimes ? `${timeStr}–${endStr}` : timeStr;

        const instructorName = INSTRUCTORS[it.instructor] || "Instructor";
        const classHref = CLASSES_URL; // no anchors per your request

        return `
          <div class="sched-item">
            <div class="sched-itemText">
              <a class="sched-classLink" href="${classHref}">${escapeHtml_(it.className)}</a>
              <div class="sched-meta">${timeRange} with ${escapeHtml_(instructorName)}</div>
            </div>
            <a class="sched-btn" href="${RESERVE_URL}">RESERVE</a>
          </div>
        `;
      })
      .join("");

    return `
      <article class="sched-day">
        <div class="sched-dayHead">
          <p class="sched-dayLabel">${dayLabel}</p>
          <p class="sched-dateLabel">${dateLabel}</p>
        </div>
        <div class="sched-items">${rows}</div>
      </article>
    `;
  }

  function buildRollingDays_(startDate, count) {
    const out = [];
    const base = new Date(
      startDate.getFullYear(),
      startDate.getMonth(),
      startDate.getDate()
    ); // midnight local
    for (let i = 0; i < count; i++) {
      const d = new Date(base);
      d.setDate(base.getDate() + i);
      out.push({
        date: d,
        weekday: d.toLocaleDateString(undefined, { weekday: "long" }),
        month: d.getMonth() + 1,
        day: d.getDate(),
      });
    }
    return out;
  }

  function combineDateTime_(dateObj, hhmm) {
    const [hh, mm] = hhmm.split(":").map(Number);
    return new Date(
      dateObj.getFullYear(),
      dateObj.getMonth(),
      dateObj.getDate(),
      hh,
      mm,
      0,
      0
    );
  }

  function addMinutes_(dateObj, min) {
    const d = new Date(dateObj);
    d.setMinutes(d.getMinutes() + (Number(min) || 0));
    return d;
  }

  // Format like 5:30p / 8:30a
  function formatTime_(dateObj) {
    let h = dateObj.getHours();
    const m = dateObj.getMinutes();
    const am = h < 12;
    const suffix = am ? "a" : "p";
    h = h % 12;
    if (h === 0) h = 12;
    const mm = String(m).padStart(2, "0");
    return `${h}:${mm}${suffix}`;
  }

  function escapeHtml_(s) {
    return String(s || "")
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }
})();
</script>
</body>
